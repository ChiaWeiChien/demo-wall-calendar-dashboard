/* ============================================================
   Wall Calendar Dashboard - style.css
   - Layout A: left big date, right weather + lunar
   - Designed for iPad wall mount (landscape looks best)
   - Portrait mode: switch lunar Yi/Ji into horizontal tag flow
   - English comments only (project style)
   ============================================================ */

/* ---------- Theme tokens (colors, surfaces) ---------- */
:root{
  --bg: #0b0f14;                         /* background base */
  --card: rgba(255,255,255,0.06);        /* card base */
  --card2: rgba(255,255,255,0.08);       /* card highlight */
  --text: rgba(255,255,255,0.92);        /* primary text */
  --muted: rgba(255,255,255,0.65);       /* secondary text */
  --muted2: rgba(255,255,255,0.48);      /* tertiary text */
  --line: rgba(255,255,255,0.12);        /* hairline border */

  /* Yi/Ji accent chips */
  --yi: rgba(60, 210, 140, 0.20);
  --ji: rgba(255, 120, 120, 0.20);

  /* Tag/chip surface (used in portrait lunar flow) */
  --chip: rgba(255,255,255,0.06);
}

/* ---------- Global reset ---------- */
*{ box-sizing: border-box; }
html,body{ height:100%; margin:0; }

/* ---------- Page background / typography ---------- */
body{
  background:
    radial-gradient(1200px 800px at 20% 10%, rgba(255,255,255,0.10), transparent 60%),
    radial-gradient(1000px 700px at 90% 30%, rgba(80,170,255,0.10), transparent 55%),
    var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text",
               "PingFang TC", "Noto Sans TC", "Microsoft JhengHei", sans-serif;

  /* Dashboard style: no page scroll.
     If something overflows, we handle it by layout + font scaling. */
  overflow: hidden;
}

/* ============================================================
   App root container
   ============================================================ */
.screen{
  height:100%;
  display:flex;
  flex-direction:column;

  /* Safe area bottom for iPad (home indicator) */
  padding: 24px 28px calc(18px + env(safe-area-inset-bottom));
  gap: 18px;
}

/* ============================================================
   Layout A (landscape default)
   - Left: date panel (bigger)
   - Right: stacked weather + lunar panels
   ============================================================ */
.layout-a{
  flex: 1;
  min-height: 0;               /* IMPORTANT: allow inner flex/grid to shrink */
  display:grid;
  grid-template-columns: 1.13fr 0.87fr; /* left bigger */
  gap: 18px;
}

/* ---------- Common panel card ---------- */
.panel{
  height:100%;
  padding: 18px 20px;
  background: linear-gradient(180deg, var(--card2), var(--card));
  border: 1px solid var(--line);
  border-radius: 18px;
  backdrop-filter: blur(10px);

  min-height: 0; /* IMPORTANT: prevents overflow in nested flex/grid */
}

.panel-title{
  margin: 0 0 12px 0;
  font-size: 18px;
  color: var(--muted);
  font-weight: 800;
  letter-spacing: 0.6px;
}

/* ============================================================
   Left Date Panel
   ============================================================ */
.panel-date{
  display:flex;
  flex-direction:column;
}

.date-md{
  font-size: 22px;
  color: var(--muted);
  font-weight: 700;
  letter-spacing: 0.8px;
}

/* Big date group (centered) */
/* .date-huge{
  margin-top: 10px;
  padding: 10px 0 8px;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  text-align: center;
} */
.date-huge{
  margin-top: 10px;
  padding: 10px 0 8px;

  /* key: take remaining vertical space between date-md and date-meta */
  flex: 1;

  display: flex;
  flex-direction: column;
  align-items: center;

  /* key: vertical centering */
  justify-content: center;

  text-align: center;
}

/* Big number line (mmdd in your HTML) */

.mmdd{
  font-size: 120px;   /* was 140px */
  font-weight: 900;
  line-height: 1.05;
  letter-spacing: 0.6px;
}

.dow{
  margin-top: 12px;
  font-size: 58px;    /* was 52px */
  font-weight: 900;
  line-height: 1.0;
}

.yyyy{
  margin-top: 10px;
  font-size: 40px;    /* was 36px */
  color: var(--muted);
  font-weight: 800;
}

/* Bottom meta section in date panel */
.date-meta{
  margin-top: auto; /* push meta to bottom */
  padding-top: 14px;
  border-top: 1px solid var(--line);

  display:flex;
  flex-direction:column;
  gap: 10px;
}

.meta-row{
  font-size: 22px;
  line-height: 1.25;
}

.meta-row.muted{ color: var(--muted2); }
.meta-label{ color: var(--muted2); }

/* ============================================================
   Right Stack (Weather + Lunar)
   ============================================================ */
.right-stack{
  display:grid;
  /* Weather slightly taller than lunar in landscape */
  grid-template-rows: 1.25fr 0.75fr;
  gap: 18px;
  min-height: 0; /* IMPORTANT */
}

.panel-weather,
.panel-lunar{
  display:flex;
  flex-direction:column;
  min-height: 0; /* IMPORTANT */
}

/* ============================================================
   Weather Panel
   ============================================================ */
.weather{
  display:flex;
  flex-direction:column;
  gap: 10px;
  flex:1;
  min-height:0; /* IMPORTANT */
}

.wx-main{
  display:flex;
  align-items:center;
  gap: 12px;
  padding: 6px 0 2px;
}

.wx-icon{
  font-size: 54px;
  line-height: 1;
  width: 64px;
  text-align:center;
  opacity: 0.95;
}

.wx-text{
  font-size: 28px;
  font-weight: 900;
  margin-bottom: 4px;
}

.wx-temp{
  display:flex;
  align-items:baseline;
  gap: 10px;
}

.wx-now{
  font-size: 42px;
  font-weight: 950;
}

.wx-feels{
  font-size: 18px;
  color: var(--muted);
}

.wx-grid{
  margin-top: 6px;
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 10px;
}

.wx-kv{
  padding: 12px 12px;
  border: 1px solid var(--line);
  border-radius: 14px;
  background: rgba(255,255,255,0.03);
}

.wx-kv .k{
  font-size: 15px;
  color: var(--muted2);
  margin-bottom: 6px;
}

.wx-kv .v{
  font-size: 20px;
  font-weight: 900;
}

/* ============================================================
   Weather temperature trend (SVG sparkline)
   ============================================================ */
/* ============================================================
   Weather: Trend line (C: show start/end only) + footer
   ============================================================ */

.wx-trend{
  margin-top: 10px;
  padding-top: 6px;
}

.wx-trend-title{
  font-size: 14px;
  color: var(--muted2);
  font-weight: 800;
  letter-spacing: 0.3px;
  margin: 0 0 8px 0;
}

.wx-trend-wrap{
  position: relative;
  width: 100%;
  height: 40px;
}

.wx-trend-svg{
  width: 100%;
  height: 40px;
  display: block;
}

.wx-trend-base{
  stroke: rgba(255,255,255,0.10);
  stroke-width: 1;
}

.wx-trend-line{
  fill: none;
  stroke: rgba(255,255,255,0.55);
  stroke-width: 2;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.wx-trend-dot{
  fill: rgba(255,255,255,0.95);
  opacity: 0.95;
}

.wx-trend-dot.mid{
  fill: rgba(255,255,255,0.75);
  opacity: 0.9;
}

.wx-trend-label{
  position: absolute;
  top: 0px;
  font-size: 13px;
  color: rgba(255,255,255,0.72);
  font-weight: 900;
  letter-spacing: 0.2px;
  padding: 2px 8px;
  border-radius: 999px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(6px);
  user-select: none;
}

.wx-trend-left{ left: 0; transform: translateX(-2px); }
.wx-trend-right{ right: 0; transform: translateX(2px); }

/* Weather footer inside the card (Location | Updated) */
.wx-footer{
  margin-top: auto;
  padding-top: 12px;
  border-top: 1px solid var(--line);

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;

  font-size: 14px;
  color: var(--muted2);
}

.wx-footer-left,
.wx-footer-right{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wx-footer-left{
  max-width: 60%;
}

.wx-footer-right{
  max-width: 40%;
  text-align: right;
}


/* ============================================================
   Lunar Panel (Landscape default: two columns Yi/Ji)
   ============================================================ */
.lunar-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;   /* two columns in landscape */
  gap: 14px;

  flex: 1;
  min-height: 0; /* IMPORTANT: allow inner content to shrink */
}

.lunar-col{
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-height: 0;
}

.lunar-head{
  display: flex;
  align-items: center;
}

/* Yi/Ji badge */
.badge{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: auto;
  padding: 6px 10px;

  border-radius: 999px;
  text-align: center;
  font-weight: 950;
  font-size: 18px;
  line-height: 1;
  white-space: nowrap;

  border: 1px solid var(--line);
  flex: 0 0 auto;
}

.badge-yi{ background: var(--yi); }
.badge-ji{ background: var(--ji); }

/* Default list style (landscape) */
.items{
  margin: 0;
  padding-left: 18px;
  line-height: 1.35;
}

.items-compact{
  font-size: 20px;
  color: rgba(255,255,255,0.86);
  padding-left: 18px;
  line-height: 1.35;
}

.items-compact li{ margin: 3px 0; }

/* "+N" overflow marker for Yi/Ji list (landscape bullet list) */
.item-more{
  list-style: none;                 /* looks like a tag instead of bullet */
  display: inline-block;
  margin: 6px 0 0 0;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px dashed var(--line);
  background: rgba(255,255,255,0.08);
  color: var(--text);
  font-weight: 900;
  letter-spacing: 0.2px;
}

/* Shared hint at panel bottom */
.hint{
  margin-top: auto;
  padding-top: 12px;
  font-size: 14px;
  color: var(--muted2);
  border-top: 1px solid var(--line);
}

/* ============================================================
   Footer
   ============================================================ */
.footer{
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:center;
  font-size: 16px;
  color: var(--muted2);
  padding: 4px 0;
}

.sep{ opacity: 0.6; }

#versionText {
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}


/* ============================================================
   Responsive: Portrait / narrow width adjustments
   IMPORTANT: This is the missing piece that caused "portrait disappeared".
   - Layout A: switch to one-column stack
   - Downscale the big date typography
   - Lunar: Yi/Ji -> tag rows (max 2 rows via JS)
   ============================================================ */
@media (max-width: 900px){

  /* ✅ Layout A: two columns -> one column */
  .layout-a{
    grid-template-columns: 1fr;
    grid-template-rows: auto auto;
  }

  /* ✅ Right stack: let panels size naturally in portrait */
  .right-stack{
    grid-template-rows: auto auto;
  }

  /* ✅ Downscale date to avoid eating all vertical space */
  .mmdd{ font-size: 72px; line-height: 1.05; }
  .dow{  font-size: 34px; line-height: 1.05; margin-top: 8px; }
  .yyyy{ font-size: 22px; margin-top: 6px; }
  .meta-row{ font-size: 18px; }

  /* Optional: slightly tighter paddings in portrait */
  .screen{ padding: 18px 18px calc(14px + env(safe-area-inset-bottom)); gap: 14px; }
  .panel{ padding: 16px 16px; border-radius: 16px; }
}

/* ---------- Lunar: switch to stacked rows ---------- */
.panel-lunar .lunar-grid{
  grid-template-columns: 1fr;   /* Yi row then Ji row */
  gap: 12px;
}

/* Each row: badge + tags list */
.panel-lunar .lunar-col{
  display: grid;
  grid-template-columns: auto 1fr; /* [宜] + tags */
  align-items: start;
  column-gap: 10px;
  row-gap: 6px;
}

/* Keep badge on the left */
.panel-lunar .lunar-head{
  grid-column: 1;
}

/* Tag list on the right */
.panel-lunar .items,
.panel-lunar .items-compact{
  grid-column: 2;
  margin: 0;
  padding-left: 0;   /* remove bullet indent */
  list-style: none;  /* no bullets in tag mode */

  display: flex;
  flex-wrap: wrap;
  gap: 8px 8px;

  /* The max-rows clamp is handled by JS (offsetTop). */
}

/* Tag pill style */
.panel-lunar .items li,
.panel-lunar .items-compact li{
  margin: 0;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,0.03);
  font-size: 16px;
  line-height: 1;
  white-space: nowrap;
}

/* "+N" pill (in tag mode) */
.panel-lunar .items li.item-more,
.panel-lunar .items-compact li.item-more{
  border-style: dashed;
  color: var(--muted);
  background: rgba(255,255,255,0.02);
}

/* ============================================================
   End of style.css
   ============================================================ */
